import{A as x,R as S,b as k}from"./ReadArticleLoading.894a14ee.js";import{b as g,R as h,K as R}from"./ResponseResult.f1dd6b90.js";import{u as A}from"./articleSearch.8eaf26fb.js";import{_ as C,d as b,x as I,y as V,r as v,a as i,c as _,F as B,z as j,h as d,B as L,j as u,k as m,e as E,q as O}from"./index.ae061ee8.js";import"./baseline-close.4e5dc0bb.js";import"./round-star.f65dba17.js";import"./openDB.477f2690.js";const T=async(p,t,l)=>{const s=new URL(`${g}/v1_0/search`);s.searchParams.set("q",p),t!==void 0&&s.searchParams.set("page",t.toString()),l!==void 0&&s.searchParams.set("per_page",l.toString());const r=await fetch(s,{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8"}});return r.ok?new h("getSearchArticle","success",r):new h("getSearchArticle","failure",r)};const U={class:"search-result"},q={class:"transition-container"},z=b({__name:"SearchResult",async setup(p){let t,l;const s=A(),r=I([]);try{const a=s.searchValue;a.trim()!==""&&R(([t,l]=V(()=>T(a,1,10)),t=await t,l(),t)).with({responseType:"success"},async o=>{(await o.responseContent.json()).data.results.forEach(e=>{r.push({id:parseInt(e.art_id),title:e.title,authorId:parseInt(e.aut_id),author:e.aut_name,commentsCount:parseInt(e.comm_count),publishDate:new Date(e.pubdate),cover:{type:parseInt(e.cover.type),urls:e.cover.images}})})}).otherwise(o=>{console.error(o)})}catch(a){console.error(a)}let f=v(0),c=v(!1);const y=a=>{f.value=a,c.value=!0},w=()=>{c.value=!1};return(a,o)=>(i(),_("div",U,[(i(!0),_(B,null,j(r,n=>(i(),m(x,{key:n.id,article:n,onClick:e=>y(n.id)},null,8,["article","onClick"]))),128)),d(L,{modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=n=>c.value=n),"slot-transition-name":"slide"},{default:u(()=>[E("div",q,[(i(),m(O,null,{fallback:u(()=>[d(S)]),default:u(()=>[d(k,{id:f.value,onClose:w},null,8,["id"])]),_:1}))])]),_:1},8,["modelValue"])]))}});var Y=C(z,[["__scopeId","data-v-3981675c"]]);export{Y as default};
